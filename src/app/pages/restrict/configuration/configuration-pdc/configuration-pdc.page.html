<ion-grid>
  <ion-row>
    <ion-col sizeMd="10" offsetMd="1">
      <ion-item lines="none">
        <ion-button slot="end" class="btn-primary border-r-3" (click)="openPdi()">Criar PDI</ion-button>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="listPdi.length > 0">
    <ion-col sizeMd="10" offsetMd="1">
        <table mat-table [dataSource]="listPdi" class="mat-elevation-z8">

          <ng-container matColumnDef="userImg">
            <th mat-header-cell *matHeaderCellDef> </th>
            <td mat-cell *matCellDef="let element">
              <ion-img class="img-logo-pdi" src="../../../../../assets/images/configuration/user-off.png"
                alt="Imagem do usuário" (click)="openUserSelect(element)"></ion-img>
            </td>
          </ng-container>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> PDI </th>
            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
          </ng-container>

          <ng-container matColumnDef="userName">
            <th mat-header-cell *matHeaderCellDef> Responsável </th>
            <td mat-cell *matCellDef="let element"> {{element.selectedUser?.name || 'Nenhum usuário selecionado'}} </td>
          </ng-container>

          <ng-container matColumnDef="concluido">
            <th mat-header-cell *matHeaderCellDef> Status </th>
            <td mat-cell *matCellDef="let element">
            <div class="pdi-status" [ngClass]="{'pdi-status-danger': !element.concluido}">
              <ion-text>
                {{element.concluido ? 'Concluído' : 'Não Concluído'}}
              </ion-text>
            </div>
          </td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef style="text-align: right;"> Ações </th>
            <td mat-cell *matCellDef="let element" style="text-align: right;">
              <ion-button size="small" class="btn-actions" (click)="presentPopover($event, element)">
                <ion-icon slot="icon-only" name="ellipsis-horizontal"></ion-icon>
              </ion-button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

    </ion-col>
  </ion-row>
</ion-grid>
